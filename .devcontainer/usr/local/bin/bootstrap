#!/usr/bin/env bash
set -Eeuo pipefail

if minikube status >/dev/null 2>&1; then
  echo "âœ… Minikube already running"
else
  echo "ðŸš€ Starting Minikube..."
  minikube start \
    --driver docker \
    --mount \
    --mount-string="/workspaces:/workspaces" \
    --addons=ingress \
    --addons=ingress-dns \
    --wait=apiserver,system_pods,default_sa \
    --wait-timeout=180s
fi

echo "ðŸš€ Bootstrapping..."
exec helmfile apply -q --suppress-diff -f /workspaces/kube-playground/bootstrap.d
